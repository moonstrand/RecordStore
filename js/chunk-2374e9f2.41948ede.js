(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2374e9f2"],{7586:function(t,e,c){"use strict";c.r(e);var i=c("7a23");const a=Object(i["i"])("div",{class:"banner favor-banner d-flex justify-content-center align-items-center"},[Object(i["i"])("div",{class:"banner-content text-center h1 text-light"},[Object(i["i"])("p",{class:"banner-title"},"願望清單"),Object(i["i"])("p",{class:"banner-title h3 pt-3 mb-0"}," 「願望清單是用來買的不是用來看的，還不快下手。」 ")])],-1),s={key:0,class:"favor-table container min-h py-5"},n={class:"table-responsive"},o={class:"table table-hover align-middle"},r=Object(i["i"])("thead",null,[Object(i["i"])("tr",{class:"favor-title bg-dark align-middle text-center h5"},[Object(i["i"])("th",{scope:"col"},"專輯"),Object(i["i"])("th",{scope:"col",class:"d-md-table-cell d-none"},"名稱"),Object(i["i"])("th",{scope:"col"},"價格"),Object(i["i"])("th",{scope:"col"},"狀態"),Object(i["i"])("th",{scope:"col"},"編輯")])],-1),l={class:"bg-light"},b={class:"text-center"},d=["src","alt"],j={class:"favor-content d-md-none d-block pt-2 mb-0"},O={class:"favor-content h5 d-md-table-cell d-none"},h={key:0,class:"favor-content h5"},p={key:1,class:"favor-content h5 text-danger"},u={class:"dropdown"},v=Object(i["i"])("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," 編輯 ",-1),f={class:"dropdown-menu dropdown-menu-dark","aria-labelledby":"dropdownMenuButton1"},g=["onClick"],m=["onClick"],k={key:1,class:"bg-color"},y={class:"favor-need container min-h d-flex flex-column justify-content-center align-items-center"},w=Object(i["i"])("i",{class:"bi bi-cart-x"},null,-1),x=Object(i["i"])("p",{class:"h3 pb-4"},"願望清單內無任何商品",-1),L=Object(i["k"])(" 來去逛逛 ");function B(t,e,c,B,C,F){const I=Object(i["I"])("Loading"),J=Object(i["I"])("RouterLink");return Object(i["B"])(),Object(i["h"])(i["a"],null,[Object(i["l"])(I,{active:C.isLoading,loader:"bars",color:"#555"},null,8,["active"]),a,0!==C.favor.length?(Object(i["B"])(),Object(i["h"])("section",s,[Object(i["i"])("div",n,[Object(i["i"])("table",o,[r,Object(i["i"])("tbody",l,[(Object(i["B"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(C.favor,(e,c)=>(Object(i["B"])(),Object(i["h"])("tr",{class:"text-center align-middle",key:c},[Object(i["i"])("th",null,[Object(i["i"])("div",b,[Object(i["i"])("img",{src:e.imageUrl,class:"favor-item",alt:e.title},null,8,d),Object(i["i"])("p",j,Object(i["L"])(e.title),1)])]),Object(i["i"])("td",O,Object(i["L"])(e.title),1),Object(i["i"])("td",{class:Object(i["u"])(["favor-content h5",{"text-danger":e.origin_price!==e.price}])}," NT."+Object(i["L"])(t.$filters.currency(e.price)),3),e.origin_price===e.price?(Object(i["B"])(),Object(i["h"])("td",h," 未特價 ")):(Object(i["B"])(),Object(i["h"])("td",p,"特價中")),Object(i["i"])("td",null,[Object(i["i"])("div",u,[v,Object(i["i"])("ul",f,[Object(i["i"])("li",null,[Object(i["i"])("a",{class:"dropdown-item",href:"#",onClick:Object(i["Z"])(t=>F.addCart(e.id,e.title),["prevent"])},"加入購物車",8,g)]),Object(i["i"])("li",null,[Object(i["i"])("a",{class:"dropdown-item",href:"#",onClick:Object(i["Z"])(t=>F.removeFavor(e),["prevent"])},"刪除",8,m)])])])])]))),128))])])])])):(Object(i["B"])(),Object(i["h"])("section",k,[Object(i["i"])("div",y,[w,x,Object(i["l"])(J,{to:"/products",class:"btn btn-outline-secondary"},{default:Object(i["X"])(()=>[L]),_:1})])]))],64)}var C={data(){return{isLoading:!1,favor:[]}},inject:["emitter","toast"],methods:{getFavor(){this.isLoading=!0,this.favor=JSON.parse(localStorage.getItem("favor"))||[],this.isLoading=!1},removeFavor(t){const e=t.id,c=this.favor.find(t=>t.id===e);this.favor.splice(this.favor.indexOf(c),1),localStorage.setItem("favor",JSON.stringify(this.favor)),this.emitter.emit("update-favor"),this.toast.success(t.title+" 已從願望清單移除"),this.getFavor()},addCart(t,e){this.isLoading=!0;const c={product_id:t,qty:1},i="https://vue3-course-api.hexschool.io/api/strand-api/cart";this.$http.post(i,{data:c}).then(t=>{t.data.success?(this.emitter.emit("update-cart"),this.toast.success(`已將 ${e} 加入購物車`)):this.toast.error("加入購物車失敗"),this.isLoading=!1}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})}},created(){this.getFavor()}},F=(c("bc6b"),c("6b0d")),I=c.n(F);const J=I()(C,[["render",B]]);e["default"]=J},"950f":function(t,e,c){},bc6b:function(t,e,c){"use strict";c("950f")}}]);
//# sourceMappingURL=chunk-2374e9f2.41948ede.js.map