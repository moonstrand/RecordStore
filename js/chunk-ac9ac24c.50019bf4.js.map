{"version":3,"sources":["webpack:///./src/views/UserProduct.vue?ee50","webpack:///./src/views/UserProduct.vue","webpack:///./src/views/UserProduct.vue?2671"],"names":["class","aria-label","aria-current","role","_createElementVNode","_hoisted_30","_createVNode","_component_Loading","active","$data","loader","color","_toDisplayString","title","_component_RouterLink","to","src","imageUrl","alt","href","onClick","$options","some","item","id","category","description","origin_price","price","_createElementBlock","_ctx","currency","$event","_Fragment","_renderList","qty","value","key","_hoisted_27","type","disabled","itemLoading","_hoisted_31","_hoisted_34","track","_hoisted_36","_hoisted_38","data","isLoading","product","favor","recommend","status","inject","methods","getProduct","this","api","$http","get","then","res","success","catch","err","toast","error","response","getID","$route","params","addCart","carts","product_id","post","emitter","emit","getFavor","JSON","parse","localStorage","getItem","toggleFavor","favorId","isFavor","delFavor","find","splice","indexOf","setItem","stringify","push","randomItem","products","filter","sort","Math","random","slice","toDetail","$router","init","created","__exports__","render"],"mappings":"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","file":"js/chunk-ac9ac24c.50019bf4.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserProduct.vue?vue&type=style&index=0&id=2282bf62&lang=scss\"","<template>\n  <Loading :active=\"isLoading\" loader=\"bars\" color=\"#555\" />\n  <div\n    class=\"\n      banner\n      product-banner\n      d-flex\n      justify-content-center\n      align-items-center\n    \"\n  >\n    <div class=\"banner-content text-center h1 text-light\">\n      <p class=\"banner-title mb-0\">{{ product.title }}</p>\n    </div>\n  </div>\n  <div class=\"bg-color\">\n    <section class=\"container border-bottom py-4\">\n      <nav aria-label=\"breadcrumb\">\n        <ol class=\"breadcrumb py-3 mb-0 ps-sm-0 ps-2\">\n          <li class=\"breadcrumb-item\">\n            <RouterLink to=\"/products\">專輯列表</RouterLink>\n          </li>\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">\n            <strong>{{ product.title }}</strong>\n          </li>\n        </ol>\n      </nav>\n      <div class=\"row my-4\">\n        <div class=\"col-lg-6 text-lg-start text-center\">\n          <img\n            class=\"product-img\"\n            :src=\"product.imageUrl\"\n            :alt=\"product.title\"\n          />\n        </div>\n        <div\n          class=\"\n            col-lg-6\n            d-flex\n            flex-column\n            justify-content-between\n            py-4\n            px-sm-0 px-4\n          \"\n        >\n          <div class=\"product-intro\">\n            <div class=\"d-flex justify-content-between align-items-center\">\n              <p class=\"title h2 mb-0\">{{ product.title }}</p>\n              <a href=\"#\" class=\"favor\" @click.prevent=\"toggleFavor(product)\">\n                <i\n                  class=\"h4\"\n                  :class=\"\n                    favor.some((item) => item.id === product.id)\n                      ? 'bi bi-star-fill text-warning'\n                      : 'bi bi-star'\n                  \"\n                ></i>\n              </a>\n            </div>\n            <div class=\"py-3\">\n              <span class=\"badge bg-dark me-2\">{{ product.category }}</span>\n              <span class=\"badge bg-secondary me-2\">{{ product.class }}</span>\n            </div>\n            <div class=\"content h5\">\n              <p class=\"lh-lg mb-md-0 mb-4\">\n                {{ product.description }}\n              </p>\n            </div>\n          </div>\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <div class=\"product-intro d-flex align-items-end\">\n              <small\n                class=\"text-secondary pe-2 mb-0\"\n                v-if=\"product.origin_price !== product.price\"\n              >\n                <s>NT.{{ $filters.currency(product.origin_price) }}</s>\n              </small>\n              <p\n                class=\"title h4 mb-0\"\n                :class=\"{\n                  'text-danger': product.origin_price !== product.price,\n                }\"\n              >\n                NT.{{ $filters.currency(product.price) }}\n              </p>\n            </div>\n            <div class=\"input-group product-input\">\n              <select\n                class=\"form-select\"\n                id=\"inputGroupSelect04\"\n                aria-label=\"Example select with button addon\"\n                v-model.number=\"qty\"\n              >\n                <option :value=\"qty\" v-for=\"qty in 15\" :key=\"qty\">\n                  {{ qty }}\n                </option>\n              </select>\n              <button\n                class=\"btn btn-outline-secondary\"\n                type=\"button\"\n                :disabled=\"status.itemLoading === product.id\"\n                @click=\"addCart(product, qty)\"\n              >\n                <div\n                  class=\"spinner-grow spinner-grow-sm text-lighty me-2\"\n                  role=\"status\"\n                  v-if=\"status.itemLoading === product.id\"\n                >\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                加入購物車\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n    <section\n      class=\"container product-intro border-bottom py-xl-5 py-4 px-sm-0 px-4\"\n    >\n      <p class=\"title border-start border-info border-5 h2 ps-3\">曲目</p>\n      <p class=\"content wrap lh-lg ps-3 pt-4\">\n        {{ product.track }}\n      </p>\n    </section>\n    <section\n      class=\"container product-intro border-bottom py-xl-5 py-4 px-sm-0 px-4\"\n    >\n      <p class=\"title border-start border-danger border-5 h2 ps-3\">購買須知</p>\n      <p class=\"content lh-lg h5 pt-4\">運送方式：</p>\n      <p class=\"content lh-lg mb-0\">\n        <i class=\"bi bi-truck\"></i> 宅配可取貨點：臺灣、蘭嶼、綠島 <br />\n        <i class=\"bi bi-shop\"></i> 超商可取貨點：臺灣、蘭嶼、綠島、澎湖 <br />\n      </p>\n      <p class=\"content lh-lg h5 pt-4\">退換貨須知：</p>\n      <ul class=\"content lh-lg mb-0\">\n        <li>\n          收到商品後有7天猶豫期，若商品有問題請於到貨後7天內於平日上班時間9點至17點來電，\n          我們將盡速為您處理。\n        </li>\n        <li>\n          退貨的商品必須必須回復原狀，包含商品主體、附件、內外包裝、隨機文件、贈品、活動贈品等，我們會安排貨運前往收回商品。\n        </li>\n        <li>\n          限量商品因數量有限，若庫存不足時，將無法提供換貨，敬請包涵見諒。\n        </li>\n      </ul>\n      <p class=\"content lh-lg h5 pt-4\">防詐騙提醒：</p>\n      <p class=\"content lh-lg mb-0\">\n        本店不會主動要求客戶提供個人資料，或是以分期付款、扣款失敗、\n        更改結帳方式為由等名義請客戶提供銀行帳戶、信用卡資料或操作ATM轉帳匯款\n        ，還請您提高警覺，若有接到不明來電請來電詢問或是撥打165防詐騙專線查證\n        ，以免遭詐！\n      </p>\n    </section>\n    <section class=\"container product-intro py-xl-5 py-4 px-sm-0 px-4\">\n      <p\n        class=\"title border-start border-success border-5 h2 ps-3 mb-xl-5 mb-4\"\n      >\n        精選推薦\n      </p>\n      <div class=\"row\">\n        <div\n          class=\"col-lg-3 col-md-6 col-sm-12 mb-lg-0 mb-4\"\n          v-for=\"item in recommend\"\n          :key=\"item.id\"\n        >\n          <div class=\"card\" @click=\"toDetail(item.id)\">\n            <img :src=\"item.imageUrl\" class=\"card-img-top\" :alt=\"item.title\" />\n            <div class=\"card-body p-2\">\n              <p class=\"fs-5 ps-2 mt-1 mb-0\">{{ item.title }}</p>\n              <p class=\"fs-5 text-end pe-2 mb-1\">\n                NT. {{ $filters.currency(item.price) }}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      product: {},\n      id: '',\n      qty: 1,\n      favor: [],\n      recommend: [],\n      status: {\n        itemLoading: '',\n      },\n    };\n  },\n  inject: ['emitter', 'toast'],\n  methods: {\n    getProduct() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.product = res.data.product;\n          }\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    getID() {\n      this.id = this.$route.params.id;\n    },\n    addCart(item, qty) {\n      this.status.itemLoading = item.id;\n      const carts = {\n        product_id: item.id,\n        qty,\n      };\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .post(api, { data: carts })\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('update-cart');\n            this.toast.success(`已將 ${item.title} 加入購物車`);\n            this.qty = 1;\n          }\n          this.status.itemLoading = '';\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    getFavor() {\n      this.favor = JSON.parse(localStorage.getItem('favor')) || [];\n    },\n    toggleFavor(product) {\n      const favorId = product.id;\n      const isFavor = this.favor.some((item) => item.id === favorId);\n      if (!isFavor) {\n        this.favor.push(product);\n        localStorage.setItem('favor', JSON.stringify(this.favor));\n        this.toast.success(`${product.title} 已加入願望清單`);\n      } else {\n        const delFavor = this.favor.find((item) => item.id === favorId);\n        this.favor.splice(this.favor.indexOf(delFavor), 1);\n        localStorage.setItem('favor', JSON.stringify(this.favor));\n        this.toast.success(`${product.title} 已從願望清單中移除`);\n      }\n      this.emitter.emit('update-favor');\n      this.getFavor();\n    },\n    randomItem() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.recommend = res.data.products\n              .filter((item) => item.id !== this.id)\n              .sort(() => Math.random() - 0.5)\n              .slice(0, 4);\n          }\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    toDetail(id) {\n      this.$router.push(id);\n      this.id = id;\n      this.init();\n    },\n    init() {\n      this.getProduct();\n      this.getFavor();\n      this.randomItem();\n    },\n  },\n  created() {\n    this.getID();\n    this.init();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/scss/components/_userProduct.scss\";\n</style>\n","import { render } from \"./UserProduct.vue?vue&type=template&id=2282bf62\"\nimport script from \"./UserProduct.vue?vue&type=script&lang=js\"\nexport * from \"./UserProduct.vue?vue&type=script&lang=js\"\n\nimport \"./UserProduct.vue?vue&type=style&index=0&id=2282bf62&lang=scss\"\n\nimport exportComponent from \"D:\\\\User\\\\Desktop\\\\Vue 3\\\\record_store\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}