(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5197782b"],{"76db":function(t,e,c){"use strict";c.r(e);var s=c("7a23");const i=Object(s["i"])("div",{class:"nav-bg"},null,-1),a={class:"bg-color cart-h py-sm-0 py-4"},n=Object(s["j"])('<section class="container d-flex flex-md-row flex-column justify-content-around align-items-center py-md-5 pb-3"><div class="cart-step h4 py-3 px-4 border border-dark text-light"><i class="bi bi-1-square pe-4 border-end border-light border-2 d-lg-inline d-none"></i><i class="bi bi-cart-check ps-lg-4 ps-0"></i><span class="h5 ps-3">確認訂單</span></div><i class="bi bi-chevron-right d-md-block d-none h4"></i><i class="bi bi-chevron-down d-md-none d-block h4"></i><div class="cart-step bg-light h4 py-3 px-4 border border-dark text-dark"><i class="bi bi-2-square pe-4 border-end border-dark border-2 d-lg-inline d-none"></i><i class="bi bi-file-text ps-lg-4 ps-0"></i><span class="h5 ps-3">填寫資料</span></div><i class="bi bi-chevron-right d-md-block d-none h4"></i><i class="bi bi-chevron-down d-md-none d-block h4"></i><div class="cart-step bg-light h4 py-3 px-4 border border-dark text-dark"><i class="bi bi-3-square pe-4 border-end border-dark border-2 d-lg-inline d-none"></i><i class="bi bi-credit-card ps-lg-4 ps-0"></i><span class="h5 ps-3">確認付款</span></div></section>',1),l={class:"container"},r={class:"row g-3 mb-3"},o={class:"col-xl-8"},d={class:"cart-bg px-4"},b=Object(s["i"])("p",{class:"text-center h3 py-4 mb-0 cart-title"},"您的購物車",-1),p={class:"col-md-6 align-items-center h5 my-sm-0 my-4"},u={class:"row"},h={class:"col-md-6 d-flex justify-content-center align-items-center cart-text"},j=["src","alt"],m={class:"col-md-6 d-flex flex-column justify-content-center align-items-center cart-text pt-md-0 pt-3"},O={class:"mb-3"},g={key:0,class:"mb-0"},y={key:1,class:"text-success mb-0"},x={class:"col-md-6 my-0 h5"},f={class:"row pt-md-0 pt-4 mb-sm-0 mb-4"},v={class:"col-md-6 d-flex justify-content-center align-items-center"},k={class:"input-group input-group-sm cart-qty"},C=["onClick"],w=Object(s["i"])("i",{class:"bi bi-plus h5"},null,-1),L=[w],q=["onUpdate:modelValue"],_=["onClick","disabled"],$=Object(s["i"])("i",{class:"bi bi-dash h5"},null,-1),B=[$],N={class:"col-md-6 d-flex justify-content-center align-items-center pe-4 pt-md-0 pt-4"},T=["onClick"],U=Object(s["i"])("i",{class:"bi bi-bag-x pe-2"},null,-1),V=Object(s["k"])("刪除此商品 "),I=[U,V],J={key:0,class:"container d-flex flex-column justify-content-center align-items-center cart-border cart-need pb-4"},S=Object(s["i"])("i",{class:"bi bi-cart-x"},null,-1),X=Object(s["i"])("p",{class:"h3 pb-4"},"購物車內無任何商品",-1),Y=Object(s["k"])(" 來去逛逛 "),G={class:"col-xl-4"},R={class:"cart-bg px-4"},Z=Object(s["i"])("p",{class:"cart-title h3 py-4 mb-0 text-center"},"訂單價格",-1),z={class:"cart-text cart-border h5 d-flex justify-content-xl-between justify-content-sm-start justify-content-between px-3 pt-4"},A=Object(s["i"])("p",null,"訂單總額：",-1),D={class:"cart-text h5 d-flex justify-content-xl-between justify-content-sm-start justify-content-between px-3 mb-0"},E=Object(s["i"])("p",null,"待折扣金額：",-1),F={class:"text-danger"},H={class:"ps-3 pb-2"},K={key:0,class:"text-success"},M={class:"row g-0 d-flex justify-content-xl-center justify-content-md-end cart-border pt-4 pb-2"},P={class:"col-xl-12 col-md-5 px-2"},Q={class:"input-group cart-coupon mb-3"},W=["disabled"],tt={class:"cart-bg px-4 mt-3"},et=Object(s["i"])("p",{class:"cart-title h3 py-4 mb-0 text-center"},"購買須知",-1),ct={class:"cart-text cart-border fs-5 px-2 py-3"},st=Object(s["i"])("p",{class:"lh-base mb-0"}," 在您下標後將立即處理您的訂單，現貨商品將於三個工作天內寄出 （ 不含週六日及國定例假日 ）， 若商品無庫存將由店家與您電話聯繫。 ",-1),it=Object(s["k"])(" 確認訂單 ");function at(t,e,c,w,$,U){const V=Object(s["I"])("Loading"),at=Object(s["I"])("RouterLink");return Object(s["B"])(),Object(s["h"])(s["a"],null,[Object(s["l"])(V,{active:$.isLoading,loader:"bars",color:"#555"},null,8,["active"]),i,Object(s["i"])("div",a,[n,Object(s["i"])("section",l,[Object(s["i"])("div",r,[Object(s["i"])("div",o,[Object(s["i"])("div",d,[b,(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])($.tempcarts.carts,e=>(Object(s["B"])(),Object(s["h"])("div",{class:"row align-items-center g-3 cart-item cart-border py-sm-4 pb-0 m-0",key:e.id},[Object(s["i"])("div",p,[Object(s["i"])("div",u,[Object(s["i"])("div",h,[Object(s["i"])("img",{src:e.product.imageUrl,class:"cart-img",alt:e.product.title},null,8,j)]),Object(s["i"])("div",m,[Object(s["i"])("p",O,Object(s["L"])(e.product.title),1),$.tempcarts.final_total===$.tempcarts.total?(Object(s["B"])(),Object(s["h"])("p",g," NT. "+Object(s["L"])(t.$filters.currency(e.total)),1)):(Object(s["B"])(),Object(s["h"])("p",y," NT. "+Object(s["L"])(t.$filters.currency(e.final_total)),1))])])]),Object(s["i"])("div",x,[Object(s["i"])("div",f,[Object(s["i"])("div",v,[Object(s["i"])("div",k,[Object(s["i"])("button",{class:"btn btn-outline-secondary count rounded-0",type:"button",id:"button-addon1",onClick:t=>U.updateCart(e,e.qty+1)},L,8,C),Object(s["Y"])(Object(s["i"])("input",{type:"text",class:"form-control border-secondary text-center",placeholder:"",min:"1","onUpdate:modelValue":t=>e.qty=t,disabled:""},null,8,q),[[s["S"],e.qty,void 0,{number:!0}]]),Object(s["i"])("button",{class:"btn btn-outline-secondary count rounded-0",type:"button",id:"button-addon2",onClick:t=>U.updateCart(e,e.qty-1),disabled:1===e.qty},B,8,_)])]),Object(s["i"])("div",N,[Object(s["i"])("a",{class:"btn btn-outline-danger",href:"#",onClick:Object(s["Z"])(t=>U.deleteCart(e),["prevent"])},I,8,T)])])])]))),128)),0===$.tempcarts.total?(Object(s["B"])(),Object(s["h"])("div",J,[S,X,Object(s["l"])(at,{to:"/products",class:"btn btn-outline-secondary"},{default:Object(s["X"])(()=>[Y]),_:1})])):Object(s["g"])("",!0)])]),Object(s["i"])("div",G,[Object(s["i"])("div",R,[Z,Object(s["i"])("div",z,[A,Object(s["i"])("p",null,"NT. "+Object(s["L"])(t.$filters.currency($.tempcarts.total)),1)]),Object(s["i"])("div",D,[E,Object(s["i"])("p",F," NT. "+Object(s["L"])(t.$filters.currency($.tempcarts.total-$.tempcarts.final_total)),1)]),Object(s["i"])("div",H,[$.tempcarts.final_total!==$.tempcarts.total?(Object(s["B"])(),Object(s["h"])("small",K," 已套用優惠券 ")):Object(s["g"])("",!0)]),Object(s["i"])("div",M,[Object(s["i"])("div",P,[Object(s["i"])("div",Q,[Object(s["Y"])(Object(s["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>$.code=t)},null,512),[[s["S"],$.code]]),Object(s["i"])("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=(...t)=>U.applyCoupon&&U.applyCoupon(...t)),disabled:0===$.tempcarts.total||$.tempcarts.final_total!==$.tempcarts.total}," 套用優惠碼 ",8,W)])])])]),Object(s["i"])("div",tt,[et,Object(s["i"])("div",ct,[st,Object(s["l"])(at,{to:"check",class:Object(s["u"])(["btn btn-secondary w-100 mt-4",{disabled:0===$.tempcarts.total}])},{default:Object(s["X"])(()=>[it]),_:1},8,["class"])])])])])])])],64)}var nt={data(){return{isLoading:!1,tempcarts:{},code:""}},inject:["emitter","toast"],methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/strand-api/cart";this.$http.get(t).then(t=>{t.data.success&&(this.tempcarts=t.data.data),this.isLoading=!1}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})},updateCart(t,e){this.isLoading=!0;const c="https://vue3-course-api.hexschool.io/api/strand-api/cart/"+t.id,s={product_id:t.product_id,qty:e};this.$http.put(c,{data:s}).then(t=>{t.data.success&&(this.emitter.emit("update-cart"),this.toast.success("更新購物車成功")),this.getCart()}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})},deleteCart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/strand-api/cart/"+t.id;this.$http.delete(e).then(e=>{e.data.success&&(this.emitter.emit("update-cart"),this.toast.success("已刪除 "+t.product.title)),this.getCart()}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})},applyCoupon(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/strand-api/coupon",e={code:this.code};this.$http.post(t,{data:e}).then(t=>{t.data.success?(this.toast.success(t.data.message),this.code=""):this.toast.error(t.data.message),this.getCart()}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})}},created(){this.getCart()}},lt=(c("8e89"),c("6b0d")),rt=c.n(lt);const ot=rt()(nt,[["render",at]]);e["default"]=ot},"8e89":function(t,e,c){"use strict";c("94c5")},"94c5":function(t,e,c){}}]);
//# sourceMappingURL=chunk-5197782b.24989e8c.js.map