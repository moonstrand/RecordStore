(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06bf3122"],{"063a":function(e,t,i){},1799:function(e,t,i){"use strict";var s=i("7a23");const o={"aria-label":"Page navigation example"},a={class:"pagination justify-content-center mt-4"},n={class:"page-item"},l=Object(s["i"])("span",{"aria-hidden":"true"},"«",-1),c=[l],d=["onClick"],r={class:"page-item"},u=Object(s["i"])("span",{"aria-hidden":"true"},"»",-1),p=[u];function h(e,t,i,l,u,h){return Object(s["B"])(),Object(s["h"])("nav",o,[Object(s["i"])("ul",a,[Object(s["i"])("li",n,[Object(s["i"])("a",{class:Object(s["u"])(["page-link",{disabled:!1===i.pages.has_pre}]),href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(s["Z"])(e=>h.updatePage(i.pages.current_page-1),["prevent"]))},c,2)]),(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(i.pages.total_pages,e=>(Object(s["B"])(),Object(s["h"])("li",{class:Object(s["u"])(["page-item",{active:e===i.pages.current_page}]),key:e},[Object(s["i"])("a",{class:"page-link",href:"#",onClick:Object(s["Z"])(t=>h.updatePage(e),["prevent"])},Object(s["L"])(e),9,d)],2))),128)),Object(s["i"])("li",r,[Object(s["i"])("a",{class:Object(s["u"])(["page-link",{disabled:!1===i.pages.has_next}]),href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(s["Z"])(e=>h.updatePage(i.pages.current_page+1),["prevent"]))},p,2)])])])}var b={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},m=i("6b0d"),g=i.n(m);const j=g()(b,[["render",h]]);t["a"]=j},"290e":function(e,t,i){"use strict";i("063a")},"6bde":function(e,t,i){"use strict";i.r(t);var s=i("7a23");const o={class:"row justify-content-center mt-4"},a={class:"col-10"},n={class:"text-end me-3 mb-4"},l={class:"table server-text align-middle"},c=Object(s["i"])("thead",null,[Object(s["i"])("tr",null,[Object(s["i"])("th",null,"優惠碼"),Object(s["i"])("th",null,"折扣成數"),Object(s["i"])("th",null,"到期日"),Object(s["i"])("th",{class:"text-center"},"是否啟用"),Object(s["i"])("th",{class:"text-center"},"編輯")])],-1),d={class:"text-center"},r={key:0,class:"text-success"},u={key:1,class:"text-muted"},p={class:"text-center"},h={class:"dropdown"},b=Object(s["i"])("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," 編輯 ",-1),m={class:"dropdown-menu dropdown-menu-dark","aria-labelledby":"dropdownMenuButton1"},g=["onClick"],j=["onClick"];function f(e,t,i,f,O,_){const v=Object(s["I"])("Loading"),w=Object(s["I"])("Pagination"),C=Object(s["I"])("CouponModal"),y=Object(s["I"])("DelCouponModal");return Object(s["B"])(),Object(s["h"])(s["a"],null,[Object(s["l"])(v,{active:O.isLoading,loader:"bars",color:"#555"},null,8,["active"]),Object(s["i"])("div",o,[Object(s["i"])("div",a,[Object(s["i"])("div",n,[Object(s["i"])("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=e=>_.openModal(!0))}," 建立新的優惠券 ")]),Object(s["i"])("table",l,[c,Object(s["i"])("tbody",null,[(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(O.coupons,t=>(Object(s["B"])(),Object(s["h"])("tr",{key:t.code},[Object(s["i"])("td",null,Object(s["L"])(t.code),1),Object(s["i"])("td",null,Object(s["L"])(t.percent)+"%",1),Object(s["i"])("td",null,Object(s["L"])(e.$filters.date(t.due_date)),1),Object(s["i"])("td",d,[t.is_enabled?(Object(s["B"])(),Object(s["h"])("strong",r,"啟用")):(Object(s["B"])(),Object(s["h"])("span",u,"未啟用"))]),Object(s["i"])("td",p,[Object(s["i"])("div",h,[b,Object(s["i"])("ul",m,[Object(s["i"])("li",null,[Object(s["i"])("a",{class:"dropdown-item",href:"#",onClick:Object(s["Z"])(e=>_.openModal(!1,t),["prevent"])},"編輯",8,g)]),Object(s["i"])("li",null,[Object(s["i"])("a",{class:"dropdown-item",href:"#",onClick:Object(s["Z"])(e=>_.openDelModal(t),["prevent"])},"刪除",8,j)])])])])]))),128))])])])]),Object(s["l"])(w,{pages:O.pagination,onEmitPages:_.getCoupon},null,8,["pages","onEmitPages"]),Object(s["l"])(C,{ref:"couponModal",onUpdateCoupon:_.updateCoupon,coupon:O.tempCoupon},null,8,["onUpdateCoupon","coupon"]),Object(s["l"])(y,{ref:"delCouponModal",coupon:O.tempCoupon,onDelCoupon:_.delCoupon},null,8,["coupon","onDelCoupon"])],64)}var O=i("1799");const _={class:"modal fade",tabindex:"-1",ref:"modal"},v={class:"modal-dialog modal-dialog-centered"},w={class:"modal-content"},C=Object(s["i"])("div",{class:"modal-header bg-dark text-light"},[Object(s["i"])("h5",{class:"modal-title"},"新增優惠券"),Object(s["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},k={class:"row g-2 align-items-center"},L={class:"col-6"},x=Object(s["i"])("label",{for:"couponTitle",class:"form-label"},"優惠券名稱",-1),T={class:"col-6"},B=Object(s["i"])("label",{for:"percent",class:"form-label"},"折扣成數",-1),M={class:"col-6"},D=Object(s["i"])("label",{for:"code",class:"form-label"},"優惠碼",-1),A={class:"col-6"},S=Object(s["i"])("label",{for:"due_date",class:"form-label"},"到期日",-1),P={class:"col"},$={class:"form-check mt-2"},E=Object(s["i"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),I={class:"modal-footer"},N=Object(s["i"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function U(e,t,i,o,a,n){return Object(s["B"])(),Object(s["h"])("div",_,[Object(s["i"])("div",v,[Object(s["i"])("div",w,[C,Object(s["i"])("div",y,[Object(s["i"])("div",k,[Object(s["i"])("div",L,[x,Object(s["Y"])(Object(s["i"])("input",{type:"text",id:"couponTitle",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>a.tempCoupon.title=e)},null,512),[[s["S"],a.tempCoupon.title]])]),Object(s["i"])("div",T,[B,Object(s["Y"])(Object(s["i"])("input",{type:"number",id:"percent",class:"form-control",min:"0","onUpdate:modelValue":t[1]||(t[1]=e=>a.tempCoupon.percent=e)},null,512),[[s["S"],a.tempCoupon.percent]])]),Object(s["i"])("div",M,[D,Object(s["Y"])(Object(s["i"])("input",{type:"text",id:"code",class:"form-control mt-0","onUpdate:modelValue":t[2]||(t[2]=e=>a.tempCoupon.code=e)},null,512),[[s["S"],a.tempCoupon.code]])]),Object(s["i"])("div",A,[S,Object(s["Y"])(Object(s["i"])("input",{type:"date",id:"due_date",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>a.due_date=e)},null,512),[[s["S"],a.due_date]])]),Object(s["i"])("div",P,[Object(s["i"])("div",$,[Object(s["Y"])(Object(s["i"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[4]||(t[4]=e=>a.tempCoupon.is_enabled=e)},null,512),[[s["Q"],a.tempCoupon.is_enabled]]),E])])])]),Object(s["i"])("div",I,[N,Object(s["i"])("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=t=>e.$emit("update-coupon",a.tempCoupon))}," 更新優惠券 ")])])])],512)}var Y=i("e0ae"),H={props:{coupon:{}},emits:["update-coupon"],data(){return{tempCoupon:{},due_date:""}},mixins:[Y["a"]],watch:{coupon(){this.tempCoupon=this.coupon;const e=new Date(1e3*this.tempCoupon.due_date).toISOString().split("T");[this.due_date]=e},due_date(){this.tempCoupon.due_date=Math.floor(new Date(this.due_date)/1e3)}}},V=i("6b0d"),R=i.n(V);const z=R()(H,[["render",U]]);var Z=z;const q={class:"modal fade",tabindex:"-1",ref:"modal"},F={class:"modal-dialog modal-dialog-centered"},J={class:"modal-content"},Q=Object(s["i"])("div",{class:"modal-header bg-danger text-light"},[Object(s["i"])("h5",{class:"modal-title"},"刪除此筆優惠券"),Object(s["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),G={class:"modal-body"},W=Object(s["i"])("p",null,"確認要刪除此筆優惠券？",-1),K={class:"modal-footer"},X=Object(s["i"])("small",{class:"fw-bold text-danger"},"此動作將無法回復",-1),ee=Object(s["i"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function te(e,t,i,o,a,n){return Object(s["B"])(),Object(s["h"])("div",q,[Object(s["i"])("div",F,[Object(s["i"])("div",J,[Q,Object(s["i"])("div",G,[W,Object(s["i"])("p",null,"優惠券名稱： "+Object(s["L"])(i.coupon.title),1),Object(s["i"])("p",null,"優惠碼： "+Object(s["L"])(i.coupon.code),1)]),Object(s["i"])("div",K,[X,ee,Object(s["i"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("delCoupon"))}," 刪除 ")])])])],512)}var ie={props:{coupon:{}},emits:["delCoupon"],mixins:[Y["a"]]};const se=R()(ie,[["render",te]]);var oe=se,ae={data(){return{coupons:{},pagination:{},isNew:!1,tempCoupon:{},isLoading:!1}},inject:["toast"],components:{Pagination:O["a"],CouponModal:Z,DelCouponModal:oe},methods:{getCoupon(e=1){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/strand-api/admin/coupons?page="+e;this.$http.get(t).then(e=>{e.data.success&&(this.coupons=e.data.coupons,this.pagination=e.data.pagination),this.isLoading=!1}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})},openModal(e,t){this.isNew=e,this.isNew?this.tempCoupon={due_date:(new Date).getTime()/1e3,is_enabled:0}:this.tempCoupon={...t};const i=this.$refs.couponModal;i.modalShow()},updateCoupon(e){this.isLoading=!0;const t=this.$refs.couponModal;let i="https://vue3-course-api.hexschool.io/api/strand-api/admin/coupon",s="post";this.isNew||(i="https://vue3-course-api.hexschool.io/api/strand-api/admin/coupon/"+e.id,s="put"),t.modalHide(),this.$http[s](i,{data:this.tempCoupon}).then(e=>{e.data.success&&this.toast.success("更新優惠券成功"),this.getCoupon()}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})},openDelModal(e){const t=this.$refs.delCouponModal;this.tempCoupon={...e},t.modalShow()},delCoupon(){this.isLoading=!0;const e=this.$refs.delCouponModal,t="https://vue3-course-api.hexschool.io/api/strand-api/admin/coupon/"+this.tempCoupon.id;e.modalHide(),this.$http.delete(t).then(e=>{e.data.success&&this.toast.success(`已刪除 ${this.tempCoupon.title} 優惠券`),this.getCoupon()}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})}},created(){this.getCoupon()}};i("290e");const ne=R()(ae,[["render",f]]);t["default"]=ne},"7c2b":function(e,t,i){
/*!
  * Bootstrap modal.js v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,s){e.exports=s(i("aa53"),i("6a95"),i("848f"),i("ba05"),i("302d"),i("1494"),i("5470"),i("0f28"))})(0,(function(e,t,i,s,o,a,n,l){"use strict";const c=e=>e&&"object"===typeof e&&"default"in e?e:{default:e},d=c(t),r=c(i),u=c(s),p=c(o),h=c(a),b=c(n),m="modal",g="bs.modal",j="."+g,f=".data-api",O="Escape",_="hide"+j,v="hidePrevented"+j,w="hidden"+j,C="show"+j,y="shown"+j,k="resize"+j,L="mousedown.dismiss"+j,x="keydown.dismiss"+j,T=`click${j}${f}`,B="modal-open",M="fade",D="show",A="modal-static",S=".modal.show",P=".modal-dialog",$=".modal-body",E='[data-bs-toggle="modal"]',I={backdrop:!0,focus:!0,keyboard:!0},N={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class U extends p.default{constructor(e,t){super(e,t),this._dialog=r.default.findOne(P,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new u.default,this._addEventListeners()}static get Default(){return I}static get DefaultType(){return N}static get NAME(){return m}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;const t=d.default.trigger(this._element,C,{relatedTarget:e});t.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(B),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning)return;const e=d.default.trigger(this._element,_);e.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(D),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])d.default.off(e,j);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new h.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new b.default({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=r.default.findOne($,this._dialog);i&&(i.scrollTop=0),e.reflow(this._element),this._element.classList.add(D);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,d.default.trigger(this._element,y,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){d.default.on(this._element,x,e=>{if(e.key===O)return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),d.default.on(window,k,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),d.default.on(this._element,L,e=>{e.target===e.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(B),this._resetAdjustments(),this._scrollBar.reset(),d.default.trigger(this._element,w)})}_isAnimated(){return this._element.classList.contains(M)}_triggerBackdropTransition(){const e=d.default.trigger(this._element,v);if(e.defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains(A)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(A),this._queueCallback(()=>{this._element.classList.remove(A),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!t){const t=e.isRTL()?"paddingLeft":"paddingRight";this._element.style[t]=i+"px"}if(!s&&t){const t=e.isRTL()?"paddingRight":"paddingLeft";this._element.style[t]=i+"px"}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=U.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}return d.default.on(document,T,E,(function(t){const i=e.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),d.default.one(i,C,t=>{t.defaultPrevented||d.default.one(i,w,()=>{e.isVisible(this)&&this.focus()})});const s=r.default.findOne(S);s&&U.getInstance(s).hide();const o=U.getOrCreateInstance(i);o.toggle(this)})),l.enableDismissTrigger(U),e.defineJQueryPlugin(U),U}))},e0ae:function(e,t,i){"use strict";var s=i("7c2b"),o=i.n(s);t["a"]={methods:{modalShow(){this.modal.show()},modalHide(){this.modal.hide()}},mounted(){this.modal=new o.a(this.$refs.modal)}}}}]);
//# sourceMappingURL=chunk-06bf3122.eb01544b.js.map