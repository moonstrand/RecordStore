(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-567f24b4"],{c379:function(e,t,s){"use strict";s("d042")},ce7b:function(e,t,s){"use strict";s.r(t);var a=s("7a23");const c=Object(a["i"])("div",{class:"nav-bg"},null,-1),l={class:"bg-color cart-h py-4"},i=Object(a["j"])('<section class="container d-flex flex-md-row flex-column justify-content-around align-items-center py-md-5 pb-3"><div class="cart-step bg-light h4 py-3 px-4 border border-dark text-dark"><i class="bi bi-check-lg pe-4 border-end border-dark border-2 d-lg-inline d-none"></i><i class="bi bi-cart-check ps-lg-4 ps-0"></i><span class="h5 ps-3">確認訂單</span></div><i class="bi bi-chevron-right d-md-block d-none h4"></i><i class="bi bi-chevron-down d-md-none d-block h4"></i><div class="cart-step h4 py-3 px-4 border border-dark text-light"><i class="bi bi-2-square pe-4 border-end border-light border-2 d-lg-inline d-none"></i><i class="bi bi-file-text ps-lg-4 ps-0"></i><span class="h5 ps-3">填寫資料</span></div><i class="bi bi-chevron-right d-md-block d-none h4"></i><i class="bi bi-chevron-down d-md-none d-block h4"></i><div class="cart-step bg-light h4 py-3 px-4 border border-dark text-dark"><i class="bi bi-3-square pe-4 border-end border-dark border-2 d-lg-inline d-none"></i><i class="bi bi-credit-card ps-lg-4 ps-0"></i><span class="h5 ps-3">確認付款</span></div></section>',1),r={class:"container"},o={class:"row d-flex flex-xl-row flex-column-reverse g-3"},n={class:"cart-bg pb-4 px-4"},d=Object(a["i"])("p",{class:"text-center h3 py-4 mb-0 cart-title"},"客戶資料",-1),b={class:"form-floating mb-3"},u=Object(a["i"])("label",{for:"floatingInput"},"Email",-1),p={class:"form-floating mb-3"},m=Object(a["i"])("label",{name:"name",for:"floatingInput"},"收件人姓名",-1),f={class:"form-floating mb-3"},j=Object(a["i"])("label",{name:"phone",for:"floatingInput"},"收件人電話",-1),h={class:"form-floating mb-3"},O={class:"form-floating mb-3"},g=Object(a["i"])("label",{for:"floatingTextarea2"},"備註",-1),x={class:"form-check mb-3"},v=Object(a["i"])("label",{class:"form-check-label",for:"flexCheckDefault"}," 到店自取 ",-1),k=Object(a["i"])("button",{class:"btn btn-secondary w-100"},"確認下單",-1),y={class:"col-xl-5"},w={class:"cart-bg pb-2 px-4"},L=Object(a["i"])("p",{class:"text-center h3 py-4 mb-0 cart-title"},"訂單明細",-1),V=["src","alt"],I={class:"cart-text fs-sm-5 ps-sm-5 ps-3"},$={class:"mb-0"},P={class:"py-2 mb-0"},T={key:0,class:"mb-0"},U={key:1,class:"text-success mb-0"},q={class:"cart-text cart-border h5 d-flex justify-content-between px-3 pt-4"},_=Object(a["i"])("p",null,"商品總額：",-1),B={class:"cart-text h5 d-flex justify-content-between px-3"},N=Object(a["i"])("p",null,"折扣金額：",-1),C={class:"text-danger"},D={class:"cart-text cart-border h5 d-flex justify-content-between px-3 pt-4"},S=Object(a["i"])("p",null,"訂單總額：",-1);function E(e,t,s,E,F,J){const Y=Object(a["I"])("Loading"),G=Object(a["I"])("Field"),M=Object(a["I"])("ErrorMessage"),Q=Object(a["I"])("Form");return Object(a["B"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(Y,{active:F.isLoading,loader:"bars",color:"#555"},null,8,["active"]),c,Object(a["i"])("div",l,[i,Object(a["i"])("section",r,[Object(a["i"])("div",o,[Object(a["l"])(Q,{class:"col-xl-7",onSubmit:J.submitData},{default:Object(a["X"])(({errors:e})=>[Object(a["i"])("div",n,[d,Object(a["i"])("div",b,[Object(a["l"])(G,{name:"email",type:"email",class:Object(a["u"])(["form-control",{"is-invalid":e["email"]}]),id:"floatingInput",rules:"email|required",placeholder:"name@example.com",modelValue:F.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>F.form.user.email=e)},null,8,["class","modelValue"]),u,Object(a["l"])(M,{name:"email",class:"invalid-feedback"})]),Object(a["i"])("div",p,[Object(a["l"])(G,{name:"姓名",type:"text",class:Object(a["u"])(["form-control",{"is-invalid":e["姓名"]}]),id:"floatingInput",rules:"required",placeholder:"收件人姓名",modelValue:F.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>F.form.user.name=e)},null,8,["class","modelValue"]),m,Object(a["l"])(M,{name:"姓名",class:"invalid-feedback"})]),Object(a["i"])("div",f,[Object(a["l"])(G,{name:"電話",type:"phone",class:Object(a["u"])(["form-control",{"is-invalid":e["電話"]}]),id:"floatingInput",rules:J.isPhone,placeholder:"收件人電話",modelValue:F.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>F.form.user.tel=e)},null,8,["rules","class","modelValue"]),j,Object(a["l"])(M,{name:"電話",class:"invalid-feedback"})]),Object(a["i"])("div",h,[Object(a["l"])(G,{name:"地址",type:"text",class:Object(a["u"])(["form-control",{"is-invalid":e["地址"]}]),id:"floatingInput",rules:"required",placeholder:"收件人地址",disabled:F.selfPick,modelValue:F.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>F.form.user.address=e)},null,8,["class","disabled","modelValue"]),Object(a["i"])("label",{name:"address",for:"floatingInput",class:Object(a["u"])({"text-secondary":F.selfPick})},"收件人地址",2),Object(a["l"])(M,{name:"地址",class:"invalid-feedback"})]),Object(a["i"])("div",O,[Object(a["Y"])(Object(a["i"])("textarea",{class:"form-control",placeholder:"有任何備註請留言",id:"floatingTextarea2",style:{height:"150px"},"onUpdate:modelValue":t[4]||(t[4]=e=>F.form.message=e)},null,512),[[a["S"],F.form.message]]),g]),Object(a["i"])("div",x,[Object(a["Y"])(Object(a["i"])("input",{class:"form-check-input rounded-0",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[5]||(t[5]=e=>F.selfPick=e)},null,512),[[a["Q"],F.selfPick]]),v]),k])]),_:1},8,["onSubmit"]),Object(a["i"])("div",y,[Object(a["i"])("div",w,[L,(Object(a["B"])(!0),Object(a["h"])(a["a"],null,Object(a["G"])(F.carts.carts,t=>(Object(a["B"])(),Object(a["h"])("div",{class:"d-flex align-items-center cart-border px-3 py-4",key:t.id},[Object(a["i"])("img",{src:t.product.imageUrl,class:"cart-img",alt:t.product.title},null,8,V),Object(a["i"])("div",I,[Object(a["i"])("p",$,Object(a["L"])(t.product.title),1),Object(a["i"])("p",P,Object(a["L"])(t.qty)+" 張",1),F.carts.total===F.carts.final_total?(Object(a["B"])(),Object(a["h"])("p",T," NT. "+Object(a["L"])(e.$filters.currency(t.final_total)),1)):(Object(a["B"])(),Object(a["h"])("p",U," 折扣價： NT. "+Object(a["L"])(e.$filters.currency(t.final_total)),1))])]))),128)),Object(a["i"])("div",q,[_,Object(a["i"])("p",null,"NT. "+Object(a["L"])(e.$filters.currency(F.carts.total)),1)]),Object(a["i"])("div",B,[N,Object(a["i"])("p",C," NT. "+Object(a["L"])(e.$filters.currency(F.carts.total-F.carts.final_total)),1)]),Object(a["i"])("div",D,[S,Object(a["i"])("p",null,"NT."+Object(a["L"])(e.$filters.currency(F.carts.final_total)),1)])])])])])])],64)}var F={data(){return{isLoading:!1,carts:{},form:{user:{},message:""},selfPick:!1}},inject:["emitter","toast"],methods:{getCarts(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/strand-api/cart";this.$http.get(e).then(e=>{e.data.success&&(this.carts=e.data.data),this.isLoading=!1}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})},submitData(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/strand-api/order";this.$http.post(e,{data:this.form}).then(e=>{e.data.success&&(this.emitter.emit("update-cart"),this.toast.success(e.data.message),this.$router.push("payment/"+e.data.orderId))}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})},isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}},watch:{selfPick(e){this.form.user.address=!0===e?"到店自取":""}},created(){this.getCarts()}},J=(s("c379"),s("6b0d")),Y=s.n(J);const G=Y()(F,[["render",E]]);t["default"]=G},d042:function(e,t,s){}}]);
//# sourceMappingURL=chunk-567f24b4.3be14a8d.js.map