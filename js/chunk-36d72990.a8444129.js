(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36d72990"],{"0750":function(e,t,i){"use strict";i.r(t);var s=i("7a23");const a={class:"row justify-content-center mt-5"},l={class:"col-10"},n={class:"table table-hover server-text align-middle"},d=Object(s["i"])("thead",null,[Object(s["i"])("tr",null,[Object(s["i"])("th",null,"購買時間"),Object(s["i"])("th",null,"Email"),Object(s["i"])("th",null,"訂單明細"),Object(s["i"])("th",{width:"120"},"應付金額"),Object(s["i"])("th",{width:"120"},"是否付款"),Object(s["i"])("th",{class:"text-center"},"編輯")])],-1),c={class:"form-check form-switch"},o=["checked","onUpdate:modelValue","onChange"],r={class:"form-check-label"},b={key:0,class:"text-success fw-bold"},h={key:1,class:"text-danger fw-bold"},u={class:"text-center"},O={class:"dropdown"},j=Object(s["i"])("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," 編輯 ",-1),p={class:"dropdown-menu dropdown-menu-dark","aria-labelledby":"dropdownMenuButton1"},m=["onClick"],g=["onClick"];function f(e,t,i,f,_,w){const v=Object(s["I"])("Loading"),y=Object(s["I"])("OrderModal"),k=Object(s["I"])("DelOrderModal"),L=Object(s["I"])("Pagination");return Object(s["B"])(),Object(s["h"])(s["a"],null,[Object(s["l"])(v,{active:_.isLoading,loader:"bars",color:"#555"},null,8,["active"]),Object(s["i"])("div",a,[Object(s["i"])("div",l,[Object(s["i"])("table",n,[d,Object(s["i"])("tbody",null,[(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(_.orders,t=>(Object(s["B"])(),Object(s["h"])("tr",{key:t.id},[Object(s["i"])("td",null,Object(s["L"])(e.$filters.date(t.create_at)),1),Object(s["i"])("td",null,Object(s["L"])(t.user.email),1),Object(s["i"])("td",null,[(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(t.products,e=>(Object(s["B"])(),Object(s["h"])("ul",{class:"list-unstyled mb-0",key:e.id},[Object(s["i"])("li",null,[Object(s["i"])("small",null,Object(s["L"])(e.product.title)+" 數量："+Object(s["L"])(e.qty),1)])]))),128))]),Object(s["i"])("td",null,"NT. "+Object(s["L"])(e.$filters.currency(t.total)),1),Object(s["i"])("td",null,[Object(s["i"])("div",c,[Object(s["Y"])(Object(s["i"])("input",{class:"form-check-input",type:"checkbox",role:"switch",checked:t.is_paid,"onUpdate:modelValue":e=>t.is_paid=e,onChange:e=>w.updatePaid(t)},null,40,o),[[s["Q"],t.is_paid]]),Object(s["i"])("label",r,[t.is_paid?(Object(s["B"])(),Object(s["h"])("span",b,"已付款")):(Object(s["B"])(),Object(s["h"])("span",h,"未付款"))])])]),Object(s["i"])("td",u,[Object(s["i"])("div",O,[j,Object(s["i"])("ul",p,[Object(s["i"])("li",null,[Object(s["i"])("a",{class:"dropdown-item",href:"#",onClick:Object(s["Z"])(e=>w.openModal(t),["prevent"])},"詳細",8,m)]),Object(s["i"])("li",null,[Object(s["i"])("a",{class:"dropdown-item",href:"#",onClick:Object(s["Z"])(e=>w.openDelModal(t),["prevent"])},"刪除",8,g)])])])])]))),128))])])])]),Object(s["l"])(y,{ref:"orderModal",order:_.tempOrder},null,8,["order"]),Object(s["l"])(k,{ref:"delOrderModal",order:_.tempOrder,onDelOrder:w.delOrder},null,8,["order","onDelOrder"]),Object(s["l"])(L,{pages:_.pagination,onEmitPages:w.getOrders},null,8,["pages","onEmitPages"])],64)}const _={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},w={class:"modal-dialog modal-xl modal-dialog-centered"},v={class:"modal-content"},y=Object(s["i"])("div",{class:"modal-header bg-dark text-light"},[Object(s["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},"訂單明細"),Object(s["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},L={class:"row py-2"},x={class:"col-5"},B=Object(s["i"])("span",{class:"h4 fw-bold ms-1"},"用戶資料",-1),T={class:"table mt-2 mb-4"},M={key:0},C=Object(s["i"])("th",null,"姓名",-1),P=Object(s["i"])("th",null,"Email",-1),$=Object(s["i"])("th",null,"電話",-1),A={colspan:"2"},D=Object(s["i"])("th",null,"地址",-1),E={colspan:"2"},S=Object(s["i"])("span",{class:"h4 fw-bold ms-1"},"訂單備註",-1),I={class:"h5 ms-1 mt-3"},N={class:"col-7"},q=Object(s["i"])("span",{class:"h4 fw-bold ms-1"},"訂單細節",-1),H={class:"table mt-2 mb-4"},R=Object(s["i"])("th",null,"訂單編號",-1),z=Object(s["i"])("th",null,"下單時間",-1),Z=Object(s["i"])("th",null,"付款時間",-1),G={key:0},V={key:1,class:"text-danger fw-bold"},Y=Object(s["i"])("th",null,"付款狀態",-1),F={key:0,class:"text-success fw-bold"},J={key:1,class:"text-danger fw-bold"},Q=Object(s["i"])("th",null,"總金額",-1),U=Object(s["i"])("span",{class:"h4 fw-bold ms-1"},"選購商品",-1),W={class:"table mt-2"},K=Object(s["i"])("div",{class:"modal-footer"},[Object(s["i"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," 確認 ")],-1);function X(e,t,i,a,l,n){return Object(s["B"])(),Object(s["h"])("div",_,[Object(s["i"])("div",w,[Object(s["i"])("div",v,[y,Object(s["i"])("div",k,[Object(s["i"])("div",L,[Object(s["i"])("div",x,[B,Object(s["i"])("table",T,[i.order.user?(Object(s["B"])(),Object(s["h"])("tbody",M,[Object(s["i"])("tr",null,[C,Object(s["i"])("td",null,Object(s["L"])(i.order.user.name),1)]),Object(s["i"])("tr",null,[P,Object(s["i"])("td",null,Object(s["L"])(i.order.user.email),1)]),Object(s["i"])("tr",null,[$,Object(s["i"])("td",A,Object(s["L"])(i.order.user.tel),1)]),Object(s["i"])("tr",null,[D,Object(s["i"])("td",E,Object(s["L"])(i.order.user.address),1)])])):Object(s["g"])("",!0)]),S,Object(s["i"])("p",I,'"'+Object(s["L"])(i.order.message)+'"',1)]),Object(s["i"])("div",N,[q,Object(s["i"])("table",H,[Object(s["i"])("tbody",null,[Object(s["i"])("tr",null,[R,Object(s["i"])("td",null,Object(s["L"])(i.order.id),1)]),Object(s["i"])("tr",null,[z,Object(s["i"])("td",null,Object(s["L"])(e.$filters.date(i.order.create_at)),1)]),Object(s["i"])("tr",null,[Z,Object(s["i"])("td",null,[i.order.is_paid?(Object(s["B"])(),Object(s["h"])("span",G,Object(s["L"])(e.$filters.date(i.order.paid_date)),1)):(Object(s["B"])(),Object(s["h"])("span",V,"未付款"))])]),Object(s["i"])("tr",null,[Y,Object(s["i"])("td",null,[i.order.is_paid?(Object(s["B"])(),Object(s["h"])("span",F,"已付款")):(Object(s["B"])(),Object(s["h"])("span",J,"未付款"))])]),Object(s["i"])("tr",null,[Q,Object(s["i"])("td",null,"NT. "+Object(s["L"])(e.$filters.currency(i.order.total)),1)])])]),U,Object(s["i"])("table",W,[Object(s["i"])("tbody",null,[(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(i.order.products,(t,i)=>(Object(s["B"])(),Object(s["h"])("tr",{key:i},[Object(s["i"])("th",null,Object(s["L"])(t.product.title),1),Object(s["i"])("td",null,Object(s["L"])(t.qty)+" / "+Object(s["L"])(t.product.unit),1),Object(s["i"])("td",null,"NT. "+Object(s["L"])(e.$filters.currency(t.product.price)),1)]))),128))])])])])]),K])])],512)}var ee=i("e0ae"),te={data(){return{modal:""}},props:{order:{}},mixins:[ee["a"]]},ie=i("6b0d"),se=i.n(ie);const ae=se()(te,[["render",X]]);var le=ae;const ne={class:"modal fade",tabindex:"-1",ref:"modal"},de={class:"modal-dialog modal-dialog-centered"},ce={class:"modal-content"},oe=Object(s["i"])("div",{class:"modal-header bg-danger text-light"},[Object(s["i"])("h5",{class:"modal-title"},"刪除此筆訂單"),Object(s["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),re={class:"modal-body"},be=Object(s["i"])("p",null,"確認要刪除此筆訂單？",-1),he={class:"modal-footer"},ue=Object(s["i"])("small",{class:"fw-bold text-danger"},"此動作將無法回復",-1),Oe=Object(s["i"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function je(e,t,i,a,l,n){return Object(s["B"])(),Object(s["h"])("div",ne,[Object(s["i"])("div",de,[Object(s["i"])("div",ce,[oe,Object(s["i"])("div",re,[be,Object(s["i"])("p",null,"訂單編號："+Object(s["L"])(i.order.id),1)]),Object(s["i"])("div",he,[ue,Oe,Object(s["i"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("delOrder"))}," 刪除 ")])])])],512)}var pe={props:{order:{}},emits:["delOrder"],data(){return{modal:""}},mixins:[ee["a"]]};const me=se()(pe,[["render",je]]);var ge=me,fe=i("1799"),_e={data(){return{orders:[],tempOrder:{},pagination:{},isLoading:!1}},inject:["toast"],components:{OrderModal:le,DelOrderModal:ge,Pagination:fe["a"]},methods:{getOrders(e=1){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/strand-api/admin/orders?page="+e;this.$http.get(t).then(e=>{e.data.success&&(this.orders=e.data.orders,this.pagination=e.data.pagination),this.isLoading=!1}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})},openModal(e){const t=this.$refs.orderModal;this.tempOrder={...e},t.modalShow()},openDelModal(e){const t=this.$refs.delOrderModal;this.tempOrder={...e},t.modalShow()},delOrder(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/strand-api/admin/order/"+this.tempOrder.id,t=this.$refs.delOrderModal;t.modalHide(),this.$http.delete(e).then(e=>{e.data.success&&this.toast.success("已刪除 "+this.tempOrder.id),this.getOrders()}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})},updatePaid(e){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/strand-api/admin/order/"+this.tempOrder.id;this.$http.put(t,{data:{...e}}).then(e=>{e.data.success&&this.toast.success(e.data.message),this.isLoading=!1}).catch(e=>{this.toast.error("請求失敗，代碼："+e.response.status),this.isLoading=!1})}},created(){this.getOrders()}};i("434b");const we=se()(_e,[["render",f]]);t["default"]=we},1799:function(e,t,i){"use strict";var s=i("7a23");const a={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center mt-4"},n={class:"page-item"},d=Object(s["i"])("span",{"aria-hidden":"true"},"«",-1),c=[d],o=["onClick"],r={class:"page-item"},b=Object(s["i"])("span",{"aria-hidden":"true"},"»",-1),h=[b];function u(e,t,i,d,b,u){return Object(s["B"])(),Object(s["h"])("nav",a,[Object(s["i"])("ul",l,[Object(s["i"])("li",n,[Object(s["i"])("a",{class:Object(s["u"])(["page-link",{disabled:!1===i.pages.has_pre}]),href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(s["Z"])(e=>u.updatePage(i.pages.current_page-1),["prevent"]))},c,2)]),(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(i.pages.total_pages,e=>(Object(s["B"])(),Object(s["h"])("li",{class:Object(s["u"])(["page-item",{active:e===i.pages.current_page}]),key:e},[Object(s["i"])("a",{class:"page-link",href:"#",onClick:Object(s["Z"])(t=>u.updatePage(e),["prevent"])},Object(s["L"])(e),9,o)],2))),128)),Object(s["i"])("li",r,[Object(s["i"])("a",{class:Object(s["u"])(["page-link",{disabled:!1===i.pages.has_next}]),href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(s["Z"])(e=>u.updatePage(i.pages.current_page+1),["prevent"]))},h,2)])])])}var O={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},j=i("6b0d"),p=i.n(j);const m=p()(O,[["render",u]]);t["a"]=m},"434b":function(e,t,i){"use strict";i("639b")},"639b":function(e,t,i){},"7c2b":function(e,t,i){
/*!
  * Bootstrap modal.js v5.2.0 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,s){e.exports=s(i("aa53"),i("6a95"),i("848f"),i("ba05"),i("302d"),i("1494"),i("5470"),i("0f28"))})(0,(function(e,t,i,s,a,l,n,d){"use strict";const c=e=>e&&"object"===typeof e&&"default"in e?e:{default:e},o=c(t),r=c(i),b=c(s),h=c(a),u=c(l),O=c(n),j="modal",p="bs.modal",m="."+p,g=".data-api",f="Escape",_="hide"+m,w="hidePrevented"+m,v="hidden"+m,y="show"+m,k="shown"+m,L="resize"+m,x="mousedown.dismiss"+m,B="keydown.dismiss"+m,T=`click${m}${g}`,M="modal-open",C="fade",P="show",$="modal-static",A=".modal.show",D=".modal-dialog",E=".modal-body",S='[data-bs-toggle="modal"]',I={backdrop:!0,focus:!0,keyboard:!0},N={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class q extends h.default{constructor(e,t){super(e,t),this._dialog=r.default.findOne(D,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new b.default,this._addEventListeners()}static get Default(){return I}static get DefaultType(){return N}static get NAME(){return j}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;const t=o.default.trigger(this._element,y,{relatedTarget:e});t.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(M),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning)return;const e=o.default.trigger(this._element,_);e.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(P),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])o.default.off(e,m);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new u.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new O.default({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=r.default.findOne(E,this._dialog);i&&(i.scrollTop=0),e.reflow(this._element),this._element.classList.add(P);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,o.default.trigger(this._element,k,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){o.default.on(this._element,B,e=>{if(e.key===f)return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),o.default.on(window,L,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),o.default.on(this._element,x,e=>{e.target===e.currentTarget&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(M),this._resetAdjustments(),this._scrollBar.reset(),o.default.trigger(this._element,v)})}_isAnimated(){return this._element.classList.contains(C)}_triggerBackdropTransition(){const e=o.default.trigger(this._element,w);if(e.defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;"hidden"===i||this._element.classList.contains($)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add($),this._queueCallback(()=>{this._element.classList.remove($),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!t){const t=e.isRTL()?"paddingLeft":"paddingRight";this._element.style[t]=i+"px"}if(!s&&t){const t=e.isRTL()?"paddingRight":"paddingLeft";this._element.style[t]=i+"px"}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=q.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}return o.default.on(document,T,S,(function(t){const i=e.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),o.default.one(i,y,t=>{t.defaultPrevented||o.default.one(i,v,()=>{e.isVisible(this)&&this.focus()})});const s=r.default.findOne(A);s&&q.getInstance(s).hide();const a=q.getOrCreateInstance(i);a.toggle(this)})),d.enableDismissTrigger(q),e.defineJQueryPlugin(q),q}))},e0ae:function(e,t,i){"use strict";var s=i("7c2b"),a=i.n(s);t["a"]={methods:{modalShow(){this.modal.show()},modalHide(){this.modal.hide()}},mounted(){this.modal=new a.a(this.$refs.modal)}}}}]);
//# sourceMappingURL=chunk-36d72990.a8444129.js.map