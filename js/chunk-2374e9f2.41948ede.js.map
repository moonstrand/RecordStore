{"version":3,"sources":["webpack:///./src/views/UserFavor.vue","webpack:///./src/views/UserFavor.vue?e0a2","webpack:///./src/views/UserFavor.vue?5b17"],"names":["_createElementVNode","class","scope","type","id","data-bs-toggle","aria-expanded","aria-labelledby","_createVNode","_component_Loading","active","$data","loader","color","_hoisted_1","length","_createElementBlock","_hoisted_5","_Fragment","_renderList","item","i","key","src","imageUrl","alt","title","_toDisplayString","origin_price","price","_ctx","currency","_hoisted_14","href","onClick","$options","_hoisted_16","_hoisted_17","_hoisted_20","_hoisted_21","_component_RouterLink","to","data","isLoading","favor","inject","methods","getFavor","this","JSON","parse","localStorage","getItem","removeFavor","product","favorId","delFavor","find","splice","indexOf","setItem","stringify","emitter","emit","toast","success","addCart","cart","product_id","qty","api","$http","post","then","res","error","catch","err","response","status","created","__exports__","render"],"mappings":"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","file":"js/chunk-2374e9f2.41948ede.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\" loader=\"bars\" color=\"#555\" />\n  <div\n    class=\"banner favor-banner d-flex justify-content-center align-items-center\"\n  >\n    <div class=\"banner-content text-center h1 text-light\">\n      <p class=\"banner-title\">願望清單</p>\n      <p class=\"banner-title h3 pt-3 mb-0\">\n        「願望清單是用來買的不是用來看的，還不快下手。」\n      </p>\n    </div>\n  </div>\n  <section class=\"favor-table container min-h py-5\" v-if=\"favor.length !== 0\">\n    <div class=\"table-responsive\">\n      <table class=\"table table-hover align-middle\">\n        <thead>\n          <tr class=\"favor-title bg-dark align-middle text-center h5\">\n            <th scope=\"col\">專輯</th>\n            <th scope=\"col\" class=\"d-md-table-cell d-none\">名稱</th>\n            <th scope=\"col\">價格</th>\n            <th scope=\"col\">狀態</th>\n            <th scope=\"col\">編輯</th>\n          </tr>\n        </thead>\n        <tbody class=\"bg-light\">\n          <tr\n            class=\"text-center align-middle\"\n            v-for=\"(item, i) in favor\"\n            :key=\"i\"\n          >\n            <th>\n              <div class=\"text-center\">\n                <img\n                  :src=\"item.imageUrl\"\n                  class=\"favor-item\"\n                  :alt=\"item.title\"\n                />\n                <p class=\"favor-content d-md-none d-block pt-2 mb-0\">\n                  {{ item.title }}\n                </p>\n              </div>\n            </th>\n            <td class=\"favor-content h5 d-md-table-cell d-none\">\n              {{ item.title }}\n            </td>\n            <td\n              class=\"favor-content h5\"\n              :class=\"{ 'text-danger': item.origin_price !== item.price }\"\n            >\n              NT.{{ $filters.currency(item.price) }}\n            </td>\n            <td\n              class=\"favor-content h5\"\n              v-if=\"item.origin_price === item.price\"\n            >\n              未特價\n            </td>\n            <td class=\"favor-content h5 text-danger\" v-else>特價中</td>\n            <td>\n              <div class=\"dropdown\">\n                <button\n                  class=\"btn btn-secondary btn-sm dropdown-toggle\"\n                  type=\"button\"\n                  id=\"dropdownMenuButton1\"\n                  data-bs-toggle=\"dropdown\"\n                  aria-expanded=\"false\"\n                >\n                  編輯\n                </button>\n                <ul\n                  class=\"dropdown-menu dropdown-menu-dark\"\n                  aria-labelledby=\"dropdownMenuButton1\"\n                >\n                  <li>\n                    <a\n                      class=\"dropdown-item\"\n                      href=\"#\"\n                      @click.prevent=\"addCart(item.id, item.title)\"\n                      >加入購物車</a\n                    >\n                  </li>\n                  <li>\n                    <a\n                      class=\"dropdown-item\"\n                      href=\"#\"\n                      @click.prevent=\"removeFavor(item)\"\n                      >刪除</a\n                    >\n                  </li>\n                </ul>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </section>\n  <section class=\"bg-color\" v-else>\n    <div\n      class=\"\n        favor-need\n        container\n        min-h\n        d-flex\n        flex-column\n        justify-content-center\n        align-items-center\n      \"\n    >\n      <i class=\"bi bi-cart-x\"></i>\n      <p class=\"h3 pb-4\">願望清單內無任何商品</p>\n      <RouterLink to=\"/products\" class=\"btn btn-outline-secondary\">\n        來去逛逛\n      </RouterLink>\n    </div>\n  </section>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      favor: [],\n    };\n  },\n  inject: ['emitter', 'toast'],\n  methods: {\n    getFavor() {\n      this.isLoading = true;\n      this.favor = JSON.parse(localStorage.getItem('favor')) || [];\n      this.isLoading = false;\n    },\n    removeFavor(product) {\n      const favorId = product.id;\n      const delFavor = this.favor.find((item) => item.id === favorId);\n      this.favor.splice(this.favor.indexOf(delFavor), 1);\n      localStorage.setItem('favor', JSON.stringify(this.favor));\n      this.emitter.emit('update-favor');\n      this.toast.success(`${product.title} 已從願望清單移除`);\n      this.getFavor();\n    },\n    addCart(id, title) {\n      this.isLoading = true;\n      const cart = {\n        product_id: id,\n        qty: +1,\n      };\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('update-cart');\n            this.toast.success(`已將 ${title} 加入購物車`);\n          } else {\n            this.toast.error('加入購物車失敗');\n          }\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n  },\n  created() {\n    this.getFavor();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/scss/components/_userFavor.scss\";\n</style>\n","import { render } from \"./UserFavor.vue?vue&type=template&id=c9f0631e\"\nimport script from \"./UserFavor.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavor.vue?vue&type=script&lang=js\"\n\nimport \"./UserFavor.vue?vue&type=style&index=0&id=c9f0631e&lang=scss\"\n\nimport exportComponent from \"D:\\\\User\\\\Desktop\\\\Vue 3\\\\record_store\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserFavor.vue?vue&type=style&index=0&id=c9f0631e&lang=scss\""],"sourceRoot":""}