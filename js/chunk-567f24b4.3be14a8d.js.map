{"version":3,"sources":["webpack:///./src/views/UserCheck.vue?a169","webpack:///./src/views/UserCheck.vue","webpack:///./src/views/UserCheck.vue?bc86"],"names":["_createElementVNode","class","for","name","_createVNode","_component_Loading","active","$data","loader","color","_hoisted_1","_hoisted_3","_component_Form","onSubmit","$options","errors","_hoisted_7","_component_Field","type","id","rules","placeholder","user","email","$event","_hoisted_9","_component_ErrorMessage","_hoisted_11","tel","_hoisted_13","disabled","address","style","message","_hoisted_16","value","_hoisted_18","_hoisted_19","_hoisted_22","_createElementBlock","_Fragment","_renderList","carts","item","key","src","product","imageUrl","alt","title","_toDisplayString","qty","total","final_total","_ctx","currency","_hoisted_30","_hoisted_32","_hoisted_35","data","isLoading","form","selfPick","inject","methods","getCarts","this","api","$http","get","then","res","success","catch","err","toast","error","response","status","submitData","post","emitter","emit","$router","push","orderId","isPhone","phoneNumber","test","watch","n","created","__exports__","render"],"mappings":"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","file":"js/chunk-567f24b4.3be14a8d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserCheck.vue?vue&type=style&index=0&id=6121f495&lang=scss\"","<template>\n  <Loading :active=\"isLoading\" loader=\"bars\" color=\"#555\" />\n  <div class=\"nav-bg\"></div>\n  <div class=\"bg-color cart-h py-4\">\n    <section\n      class=\"\n        container\n        d-flex\n        flex-md-row flex-column\n        justify-content-around\n        align-items-center\n        py-md-5\n        pb-3\n      \"\n    >\n      <div class=\"cart-step bg-light h4 py-3 px-4 border border-dark text-dark\">\n        <i\n          class=\"\n            bi bi-check-lg\n            pe-4\n            border-end border-dark border-2\n            d-lg-inline d-none\n          \"\n        ></i>\n        <i class=\"bi bi-cart-check ps-lg-4 ps-0\"></i>\n        <span class=\"h5 ps-3\">確認訂單</span>\n      </div>\n      <i class=\"bi bi-chevron-right d-md-block d-none h4\"></i>\n      <i class=\"bi bi-chevron-down d-md-none d-block h4\"></i>\n      <div class=\"cart-step h4 py-3 px-4 border border-dark text-light\">\n        <i\n          class=\"\n            bi bi-2-square\n            pe-4\n            border-end border-light border-2\n            d-lg-inline d-none\n          \"\n        ></i>\n        <i class=\"bi bi-file-text ps-lg-4 ps-0\"></i>\n        <span class=\"h5 ps-3\">填寫資料</span>\n      </div>\n      <i class=\"bi bi-chevron-right d-md-block d-none h4\"></i>\n      <i class=\"bi bi-chevron-down d-md-none d-block h4\"></i>\n      <div class=\"cart-step bg-light h4 py-3 px-4 border border-dark text-dark\">\n        <i\n          class=\"\n            bi bi-3-square\n            pe-4\n            border-end border-dark border-2\n            d-lg-inline d-none\n          \"\n        ></i>\n        <i class=\"bi bi-credit-card ps-lg-4 ps-0\"></i>\n        <span class=\"h5 ps-3\">確認付款</span>\n      </div>\n    </section>\n    <section class=\"container\">\n      <div class=\"row d-flex flex-xl-row flex-column-reverse g-3\">\n        <Form class=\"col-xl-7\" @submit=\"submitData\" v-slot=\"{ errors }\">\n          <div class=\"cart-bg pb-4 px-4\">\n            <p class=\"text-center h3 py-4 mb-0 cart-title\">客戶資料</p>\n            <div class=\"form-floating mb-3\">\n              <Field\n                name=\"email\"\n                type=\"email\"\n                class=\"form-control\"\n                id=\"floatingInput\"\n                rules=\"email|required\"\n                placeholder=\"name@example.com\"\n                :class=\"{ 'is-invalid': errors['email'] }\"\n                v-model=\"form.user.email\"\n              ></Field>\n              <label for=\"floatingInput\">Email</label>\n              <ErrorMessage name=\"email\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"form-floating mb-3\">\n              <Field\n                name=\"姓名\"\n                type=\"text\"\n                class=\"form-control\"\n                id=\"floatingInput\"\n                rules=\"required\"\n                placeholder=\"收件人姓名\"\n                :class=\"{ 'is-invalid': errors['姓名'] }\"\n                v-model=\"form.user.name\"\n              ></Field>\n              <label name=\"name\" for=\"floatingInput\">收件人姓名</label>\n              <ErrorMessage name=\"姓名\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"form-floating mb-3\">\n              <Field\n                name=\"電話\"\n                type=\"phone\"\n                class=\"form-control\"\n                id=\"floatingInput\"\n                :rules=\"isPhone\"\n                placeholder=\"收件人電話\"\n                :class=\"{ 'is-invalid': errors['電話'] }\"\n                v-model=\"form.user.tel\"\n              ></Field>\n              <label name=\"phone\" for=\"floatingInput\">收件人電話</label>\n              <ErrorMessage name=\"電話\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"form-floating mb-3\">\n              <Field\n                name=\"地址\"\n                type=\"text\"\n                class=\"form-control\"\n                id=\"floatingInput\"\n                rules=\"required\"\n                placeholder=\"收件人地址\"\n                :class=\"{ 'is-invalid': errors['地址'] }\"\n                :disabled=\"selfPick\"\n                v-model=\"form.user.address\"\n              ></Field>\n              <label\n                name=\"address\"\n                for=\"floatingInput\"\n                :class=\"{ 'text-secondary': selfPick }\"\n                >收件人地址</label\n              >\n              <ErrorMessage name=\"地址\" class=\"invalid-feedback\" />\n            </div>\n            <div class=\"form-floating mb-3\">\n              <textarea\n                class=\"form-control\"\n                placeholder=\"有任何備註請留言\"\n                id=\"floatingTextarea2\"\n                style=\"height: 150px\"\n                v-model=\"form.message\"\n              ></textarea>\n              <label for=\"floatingTextarea2\">備註</label>\n            </div>\n            <div class=\"form-check mb-3\">\n              <input\n                class=\"form-check-input rounded-0\"\n                type=\"checkbox\"\n                value=\"\"\n                id=\"flexCheckDefault\"\n                v-model=\"selfPick\"\n              />\n              <label class=\"form-check-label\" for=\"flexCheckDefault\">\n                到店自取\n              </label>\n            </div>\n            <button class=\"btn btn-secondary w-100\">確認下單</button>\n          </div>\n        </Form>\n        <div class=\"col-xl-5\">\n          <div class=\"cart-bg pb-2 px-4\">\n            <p class=\"text-center h3 py-4 mb-0 cart-title\">訂單明細</p>\n            <div\n              class=\"d-flex align-items-center cart-border px-3 py-4\"\n              v-for=\"item in carts.carts\"\n              :key=\"item.id\"\n            >\n              <img\n                :src=\"item.product.imageUrl\"\n                class=\"cart-img\"\n                :alt=\"item.product.title\"\n              />\n              <div class=\"cart-text fs-sm-5 ps-sm-5 ps-3\">\n                <p class=\"mb-0\">{{ item.product.title }}</p>\n                <p class=\"py-2 mb-0\">{{ item.qty }} 張</p>\n                <p class=\"mb-0\" v-if=\"carts.total === carts.final_total\">\n                  NT. {{ $filters.currency(item.final_total) }}\n                </p>\n                <p class=\"text-success mb-0\" v-else>\n                  折扣價： NT. {{ $filters.currency(item.final_total) }}\n                </p>\n              </div>\n            </div>\n            <div\n              class=\"\n                cart-text cart-border\n                h5\n                d-flex\n                justify-content-between\n                px-3\n                pt-4\n              \"\n            >\n              <p>商品總額：</p>\n              <p>NT. {{ $filters.currency(carts.total) }}</p>\n            </div>\n            <div class=\"cart-text h5 d-flex justify-content-between px-3\">\n              <p>折扣金額：</p>\n              <p class=\"text-danger\">\n                NT. {{ $filters.currency(carts.total - carts.final_total) }}\n              </p>\n            </div>\n            <div\n              class=\"\n                cart-text cart-border\n                h5\n                d-flex\n                justify-content-between\n                px-3\n                pt-4\n              \"\n            >\n              <p>訂單總額：</p>\n              <p>NT.{{ $filters.currency(carts.final_total) }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      carts: {},\n      form: {\n        user: {},\n        message: '',\n      },\n      selfPick: false,\n    };\n  },\n  inject: ['emitter', 'toast'],\n  methods: {\n    getCarts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.carts = res.data.data;\n          }\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    submitData() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      this.$http\n        .post(api, { data: this.form })\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('update-cart');\n            this.toast.success(res.data.message);\n            this.$router.push(`payment/${res.data.orderId}`);\n          }\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼';\n    },\n  },\n  watch: {\n    selfPick(n) {\n      if (n === true) {\n        this.form.user.address = '到店自取';\n      } else {\n        this.form.user.address = '';\n      }\n    },\n  },\n  created() {\n    this.getCarts();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/scss/components/_userCart.scss\";\n</style>\n","import { render } from \"./UserCheck.vue?vue&type=template&id=6121f495\"\nimport script from \"./UserCheck.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheck.vue?vue&type=script&lang=js\"\n\nimport \"./UserCheck.vue?vue&type=style&index=0&id=6121f495&lang=scss\"\n\nimport exportComponent from \"D:\\\\User\\\\Desktop\\\\Vue 3\\\\record_store\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}