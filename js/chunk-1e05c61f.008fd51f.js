(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e05c61f"],{"3e2b":function(t,e,c){"use strict";c.r(e);var s=c("7a23");const i=Object(s["i"])("div",{class:"banner products-banner d-flex justify-content-center align-items-center"},[Object(s["i"])("div",{class:"banner-content text-center h1 text-light"},[Object(s["i"])("p",{class:"banner-title"},"專輯列表"),Object(s["i"])("p",{class:"h3 pt-3 mb-0"},"「讓音樂帶給你全新的感動。」")])],-1),a={class:"min-h bg-color"},o={class:"category container py-4"},r={class:"row"},l={class:"col-lg-8 d-flex align-items-center justify-content-lg-start justify-content-center list-unstyled"},n={class:"border-end-0"},b={class:"col-lg-4 d-flex justify-content-end mt-lg-0 mt-3"},d={class:"input-group mb-3"},u=Object(s["i"])("span",{class:"input-group-text bg-white border-secondary",id:"basic-addon1"},[Object(s["i"])("i",{class:"bi bi-search"})],-1),h={class:"products container pt-xl-3 pt-0 pb-xl-5 pb-0 h-100"},g={key:0,class:"row"},j=["onClick"],p=["src","alt"],O={class:"card-body p-2"},y={class:"d-flex justify-content-between align-items-center"},f={class:"fs-5 ps-2 mt-1 mb-0"},v=["onClick"],m={class:"d-flex justify-content-between align-items-center pt-3 pb-2"},k={class:"d-flex align-items-center"},x=["disabled","onClick"],C={key:0,class:"spinner-grow spinner-grow-sm text-secondary ms-3",role:"status"},w=Object(s["i"])("span",{class:"visually-hidden"},"Loading...",-1),L=[w],B={class:"d-flex align-items-end"},S={key:0,class:"text-secondary pe-2 mb-0"},Z={key:1,class:"row py-5"},$={class:"text-center h1 fw-bold"},A=Object(s["i"])("i",{class:"bi bi-emoji-dizzy pe-2"},null,-1);function F(t,e,c,w,F,J){const N=Object(s["I"])("Loading");return Object(s["B"])(),Object(s["h"])(s["a"],null,[Object(s["l"])(N,{active:F.isLoading,loader:"bars",color:"#555"},null,8,["active"]),i,Object(s["i"])("div",a,[Object(s["i"])("section",o,[Object(s["i"])("div",r,[Object(s["i"])("ul",l,[Object(s["i"])("li",null,[Object(s["i"])("a",{class:Object(s["u"])(["category-link",{categoryActive:"全部"==F.category}]),href:"#",onClick:e[0]||(e[0]=Object(s["Z"])(t=>J.toCategory("全部"),["prevent"]))},"所有類別",2)]),Object(s["i"])("li",null,[Object(s["i"])("a",{class:Object(s["u"])(["category-link",{categoryActive:"西洋"==F.category}]),href:"#",onClick:e[1]||(e[1]=Object(s["Z"])(t=>J.toCategory("西洋"),["prevent"]))},"西洋",2)]),Object(s["i"])("li",null,[Object(s["i"])("a",{class:Object(s["u"])(["category-link",{categoryActive:"東洋"==F.category}]),href:"#",onClick:e[2]||(e[2]=Object(s["Z"])(t=>J.toCategory("東洋"),["prevent"]))},"東洋",2)]),Object(s["i"])("li",null,[Object(s["i"])("a",{class:Object(s["u"])(["category-link",{categoryActive:"華語"==F.category}]),href:"#",onClick:e[3]||(e[3]=Object(s["Z"])(t=>J.toCategory("華語"),["prevent"]))},"華語",2)]),Object(s["i"])("li",n,[Object(s["i"])("a",{class:Object(s["u"])(["category-link",{categoryActive:"純音樂"==F.category}]),href:"#",onClick:e[4]||(e[4]=Object(s["Z"])(t=>J.toCategory("純音樂"),["prevent"]))},"純音樂",2)])]),Object(s["i"])("div",b,[Object(s["i"])("div",d,[u,Object(s["Y"])(Object(s["i"])("input",{type:"search",class:"form-control border-secondary",placeholder:"請輸入關鍵字","onUpdate:modelValue":e[5]||(e[5]=t=>F.search=t)},null,512),[[s["S"],F.search]])])])])]),Object(s["i"])("section",h,[0!==J.filterProducts.length?(Object(s["B"])(),Object(s["h"])("div",g,[(Object(s["B"])(!0),Object(s["h"])(s["a"],null,Object(s["G"])(J.filterProducts,e=>(Object(s["B"])(),Object(s["h"])("div",{class:"col-xxl-3 col-lg-4 col-sm-6 mb-xxl-0",key:e.id},[Object(s["i"])("div",{class:"card mb-4",onClick:t=>J.toDetail(e.id)},[Object(s["i"])("img",{src:e.imageUrl,class:"card-img-top",alt:e.title},null,8,p),Object(s["i"])("div",O,[Object(s["i"])("div",y,[Object(s["i"])("p",f,Object(s["L"])(e.title),1),Object(s["i"])("button",{type:"button",class:"btn btn-link",onClick:Object(s["Z"])(t=>J.toggleFavor(e),["stop"])},[Object(s["i"])("i",{class:Object(s["u"])(F.favor.some(t=>t.id===e.id)?"bi bi-star-fill text-warning":"bi bi-star")},null,2)],8,v)]),Object(s["i"])("div",m,[Object(s["i"])("div",k,[Object(s["i"])("button",{type:"button",class:"btn btn-outline-secondary btn-sm ms-2",disabled:F.status.itemLoading===e.id,onClick:Object(s["Z"])(t=>J.addCart(e.id,e.title),["stop"])}," 加入購物車 ",8,x),F.status.itemLoading===e.id?(Object(s["B"])(),Object(s["h"])("div",C,L)):Object(s["g"])("",!0)]),Object(s["i"])("div",B,[e.origin_price!==e.price?(Object(s["B"])(),Object(s["h"])("small",S,[Object(s["i"])("s",null,"NT."+Object(s["L"])(t.$filters.currency(e.origin_price)),1)])):Object(s["g"])("",!0),Object(s["i"])("p",{class:Object(s["u"])(["fs-5 text-end pe-2 mb-0",{"text-danger":e.origin_price!==e.price}])}," NT."+Object(s["L"])(t.$filters.currency(e.price)),3)])])])],8,j)]))),128))])):(Object(s["B"])(),Object(s["h"])("div",Z,[Object(s["i"])("p",$,[A,Object(s["k"])(" 找不到 "+Object(s["L"])(F.search)+" 這張專輯 ",1)])]))])])],64)}var J={data(){return{isLoading:!1,products:[],search:"",category:"全部",favor:[],status:{itemLoading:""}}},inject:["emitter","toast"],methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/strand-api/products/all";this.$http.get(t).then(t=>{t.data.success&&(this.products=t.data.products),this.isLoading=!1}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})},toDetail(t){this.$router.push("/products/"+t)},toCategory(t){this.category=t},addCart(t,e){this.status.itemLoading=t;const c={product_id:t,qty:1},s="https://vue3-course-api.hexschool.io/api/strand-api/cart";this.$http.post(s,{data:c}).then(t=>{t.data.success?(this.toast.success(`已將 ${e} 加入購物車`),this.emitter.emit("update-cart")):this.toast.error("加入購物車失敗"),this.status.itemLoading=""}).catch(t=>{this.toast.error("請求失敗，代碼："+t.response.status),this.isLoading=!1})},getFavor(){this.favor=JSON.parse(localStorage.getItem("favor"))||[]},toggleFavor(t){const e=t.id,c=this.favor.some(t=>t.id===e);if(c){const c=this.favor.find(t=>t.id===e);this.favor.splice(this.favor.indexOf(c),1),localStorage.setItem("favor",JSON.stringify(this.favor)),this.toast.success(t.title+" 已從願望清單中移除")}else this.favor.push(t),localStorage.setItem("favor",JSON.stringify(this.favor)),this.toast.success(t.title+" 已加入願望清單");this.emitter.emit("update-favor"),this.getFavor()}},computed:{filterProducts(){let t;if("全部"===this.category?t=this.products.filter(t=>t):"全部"!==this.category&&(t=this.products.filter(t=>t.category===this.category)),this.search){const e=this.search.toLowerCase();t=this.products.filter(t=>t.title.toLowerCase().match(e))}return t}},watch:{search(t){t&&(this.category="全部")}},created(){this.getProducts(),this.getFavor()}},N=(c("d356"),c("6b0d")),P=c.n(N);const I=P()(J,[["render",F]]);e["default"]=I},"6aeb":function(t,e,c){},d356:function(t,e,c){"use strict";c("6aeb")}}]);
//# sourceMappingURL=chunk-1e05c61f.008fd51f.js.map