{"version":3,"sources":["webpack:///./src/views/UserProducts.vue","webpack:///./src/views/UserProducts.vue?d93a","webpack:///./src/views/UserProducts.vue?9175"],"names":["_createElementVNode","class","id","role","_hoisted_22","_createVNode","_component_Loading","active","$data","loader","color","_hoisted_1","categoryActive","href","onClick","$options","_hoisted_9","type","placeholder","$event","length","_createElementBlock","_Fragment","_renderList","item","key","src","imageUrl","alt","title","_toDisplayString","some","favor","disabled","itemLoading","_hoisted_20","_hoisted_23","origin_price","price","_ctx","currency","_hoisted_28","data","isLoading","products","search","category","status","inject","methods","getProducts","this","api","$http","get","then","res","success","catch","err","toast","error","response","toDetail","$router","push","toCategory","addCart","cart","product_id","qty","post","emitter","emit","getFavor","JSON","parse","localStorage","getItem","toggleFavor","product","favorId","isFavor","delFavor","find","splice","indexOf","setItem","stringify","computed","filterProducts","filterItems","filter","value","toLowerCase","match","watch","n","created","__exports__","render"],"mappings":"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","file":"js/chunk-1e05c61f.008fd51f.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\" loader=\"bars\" color=\"#555\" />\n  <div\n    class=\"\n      banner\n      products-banner\n      d-flex\n      justify-content-center\n      align-items-center\n    \"\n  >\n    <div class=\"banner-content text-center h1 text-light\">\n      <p class=\"banner-title\">專輯列表</p>\n      <p class=\"h3 pt-3 mb-0\">「讓音樂帶給你全新的感動。」</p>\n    </div>\n  </div>\n  <div class=\"min-h bg-color\">\n    <section class=\"category container py-4\">\n      <div class=\"row\">\n        <ul\n          class=\"\n            col-lg-8\n            d-flex\n            align-items-center\n            justify-content-lg-start justify-content-center\n            list-unstyled\n          \"\n        >\n          <li>\n            <a\n              class=\"category-link\"\n              href=\"#\"\n              :class=\"{ categoryActive: category == '全部' }\"\n              @click.prevent=\"toCategory('全部')\"\n              >所有類別</a\n            >\n          </li>\n          <li>\n            <a\n              class=\"category-link\"\n              href=\"#\"\n              :class=\"{ categoryActive: category == '西洋' }\"\n              @click.prevent=\"toCategory('西洋')\"\n              >西洋</a\n            >\n          </li>\n          <li>\n            <a\n              class=\"category-link\"\n              href=\"#\"\n              :class=\"{ categoryActive: category == '東洋' }\"\n              @click.prevent=\"toCategory('東洋')\"\n              >東洋</a\n            >\n          </li>\n          <li>\n            <a\n              class=\"category-link\"\n              href=\"#\"\n              :class=\"{ categoryActive: category == '華語' }\"\n              @click.prevent=\"toCategory('華語')\"\n              >華語</a\n            >\n          </li>\n          <li class=\"border-end-0\">\n            <a\n              class=\"category-link\"\n              href=\"#\"\n              :class=\"{ categoryActive: category == '純音樂' }\"\n              @click.prevent=\"toCategory('純音樂')\"\n              >純音樂</a\n            >\n          </li>\n        </ul>\n        <div class=\"col-lg-4 d-flex justify-content-end mt-lg-0 mt-3\">\n          <div class=\"input-group mb-3\">\n            <span\n              class=\"input-group-text bg-white border-secondary\"\n              id=\"basic-addon1\"\n              ><i class=\"bi bi-search\"></i\n            ></span>\n            <input\n              type=\"search\"\n              class=\"form-control border-secondary\"\n              placeholder=\"請輸入關鍵字\"\n              v-model=\"search\"\n            />\n          </div>\n        </div>\n      </div>\n    </section>\n    <section class=\"products container pt-xl-3 pt-0 pb-xl-5 pb-0 h-100\">\n      <div class=\"row\" v-if=\"filterProducts.length !== 0\">\n        <div\n          class=\"col-xxl-3 col-lg-4 col-sm-6 mb-xxl-0\"\n          v-for=\"item in filterProducts\"\n          :key=\"item.id\"\n        >\n          <div class=\"card mb-4\" @click=\"toDetail(item.id)\">\n            <img :src=\"item.imageUrl\" class=\"card-img-top\" :alt=\"item.title\" />\n            <div class=\"card-body p-2\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <p class=\"fs-5 ps-2 mt-1 mb-0\">{{ item.title }}</p>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-link\"\n                  @click.stop=\"toggleFavor(item)\"\n                >\n                  <i\n                    :class=\"\n                      favor.some((favor) => favor.id === item.id)\n                        ? 'bi bi-star-fill text-warning'\n                        : 'bi bi-star'\n                    \"\n                  ></i>\n                </button>\n              </div>\n              <div\n                class=\"\n                  d-flex\n                  justify-content-between\n                  align-items-center\n                  pt-3\n                  pb-2\n                \"\n              >\n                <div class=\"d-flex align-items-center\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-secondary btn-sm ms-2\"\n                    :disabled=\"status.itemLoading === item.id\"\n                    @click.stop=\"addCart(item.id, item.title)\"\n                  >\n                    加入購物車\n                  </button>\n                  <div\n                    class=\"spinner-grow spinner-grow-sm text-secondary ms-3\"\n                    role=\"status\"\n                    v-if=\"status.itemLoading === item.id\"\n                  >\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                </div>\n                <div class=\"d-flex align-items-end\">\n                  <small\n                    class=\"text-secondary pe-2 mb-0\"\n                    v-if=\"item.origin_price !== item.price\"\n                  >\n                    <s>NT.{{ $filters.currency(item.origin_price) }}</s>\n                  </small>\n                  <p\n                    class=\"fs-5 text-end pe-2 mb-0\"\n                    :class=\"{ 'text-danger': item.origin_price !== item.price }\"\n                  >\n                    NT.{{ $filters.currency(item.price) }}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"row py-5\" v-else>\n        <p class=\"text-center h1 fw-bold\">\n          <i class=\"bi bi-emoji-dizzy pe-2\"></i>\n          找不到 {{ search }} 這張專輯\n        </p>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      products: [],\n      search: '',\n      category: '全部',\n      favor: [],\n      status: {\n        itemLoading: '',\n      },\n    };\n  },\n  inject: ['emitter', 'toast'],\n  methods: {\n    getProducts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.products = res.data.products;\n          }\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    toDetail(id) {\n      this.$router.push(`/products/${id}`);\n    },\n    toCategory(category) {\n      this.category = category;\n    },\n    addCart(id, title) {\n      this.status.itemLoading = id;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.toast.success(`已將 ${title} 加入購物車`);\n            this.emitter.emit('update-cart');\n          } else {\n            this.toast.error('加入購物車失敗');\n          }\n          this.status.itemLoading = '';\n        })\n        .catch((err) => {\n          this.toast.error(`請求失敗，代碼：${err.response.status}`);\n          this.isLoading = false;\n        });\n    },\n    getFavor() {\n      this.favor = JSON.parse(localStorage.getItem('favor')) || [];\n    },\n    toggleFavor(product) {\n      const favorId = product.id;\n      const isFavor = this.favor.some((item) => item.id === favorId);\n      if (!isFavor) {\n        this.favor.push(product);\n        localStorage.setItem('favor', JSON.stringify(this.favor));\n        this.toast.success(`${product.title} 已加入願望清單`);\n      } else {\n        const delFavor = this.favor.find((item) => item.id === favorId);\n        this.favor.splice(this.favor.indexOf(delFavor), 1);\n        localStorage.setItem('favor', JSON.stringify(this.favor));\n        this.toast.success(`${product.title} 已從願望清單中移除`);\n      }\n      this.emitter.emit('update-favor');\n      this.getFavor();\n    },\n  },\n  computed: {\n    filterProducts() {\n      let filterItems;\n      if (this.category === '全部') {\n        filterItems = this.products.filter((value) => value);\n      } else if (this.category !== '全部') {\n        filterItems = this.products.filter((value) => value.category === this.category);\n      }\n      if (this.search) {\n        const item = this.search.toLowerCase();\n        filterItems = this.products.filter((value) => value.title.toLowerCase().match(item));\n      }\n      return filterItems;\n    },\n  },\n  watch: {\n    search(n) {\n      if (n) {\n        this.category = '全部';\n      }\n    },\n  },\n  created() {\n    this.getProducts();\n    this.getFavor();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/scss/components/_userProducts.scss\";\n</style>\n","import { render } from \"./UserProducts.vue?vue&type=template&id=b554f5f8\"\nimport script from \"./UserProducts.vue?vue&type=script&lang=js\"\nexport * from \"./UserProducts.vue?vue&type=script&lang=js\"\n\nimport \"./UserProducts.vue?vue&type=style&index=0&id=b554f5f8&lang=scss\"\n\nimport exportComponent from \"D:\\\\User\\\\Desktop\\\\Vue 3\\\\record_store\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserProducts.vue?vue&type=style&index=0&id=b554f5f8&lang=scss\""],"sourceRoot":""}